<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../../css/style.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://kit.fontawesome.com/19d905bb9a.js" crossorigin="anonymous"></script>

    <title></title>
</head>
<body>

    <h1>Les tests partie théorique</h1>

    <a href="../../index.html"> <button type="button" class="btn btn-success">Accueil</button></a> 

    <!-- BLOCK -->
    <article>

      <h2>Automatisation des tests</h2> 

      <h3>Utilité des tests</h3>
      <p>Permettent de gagner du temps et d'éviter les régressions (un retour en arriere sur le code. On dev une fonctionnalités qui ne marche pas et le code utilise les technqiues d'avant).</p>
      <p>Permet à un developpeur en regardant les tests de voir ce que l'on attend comme resultat </p>
      
      <h5>Liens utiles pour les tests</h5>
      <a href="https://www.iloofo.com/sites/default/files/2019-11/drupal-8-phpunit.pdf">Les tests unitaires avec drupal</a>
      <a href="https://akr.adimeo.eu/node/85">les tests sur AKR</a>
      <a href="https://phpunit.readthedocs.io/fr/latest/assertions.html">doc de php unit</a>
      
      <h4>Fonctionnement des tests</h4>
      <p>Lors du test on ne rentre pas dans drupal. Le test fera une action sans lancer le projet. Il aura ainsi une action sur le fonctionnement d'un objet qu'on lui definit </p>



      <img src="" alt="">


    </article>

    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>3 types de tests</h2>  

      <h3>Tests unitaires</h3>
      <p>Ici on peut isoler chaque test permettant d'etudier fonctionnalité par fonctionnalité</p>
      <p>Extremement rapide</p>
      
      <h3>Tests d'integration</h3>
      <p>C'est un test qui chargera un drupal avec un visuel, une db... </p>
      <p>Il creera ces elements pour ensuite les supprimer. </p>
      <p>Très lent</p>

      <h3>Tests end to end</h3>
      <p>C'est une batterie de tests qui reproduira le parcours d'un client type.</p>
      <p></p>
      <p>Il y a un outil interressant pour voir les resultats de son tests end to end</p>
      <a href="https://ghostinspector.com/landing/browser-testing/?gclid=EAIaIQobChMImKrX4eeQ9gIVWpBoCR1J3Q3hEAAYASAAEgKR8_D_BwE">ghostinspector</a>

      <img src="" alt="">

    </article>


    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>Test dans drupal</h2>

      <h3>Unit Test</h3>
      <p>Test unitaires</p>

      <h3>Test fonctionnels = test d'integration</h3>
      <p>Ce type de test est initie dans le context du code.</p>
      <p>Drupal initie un nouveau projet pour tester le code dans l'environnement</p>

      <h4>Kernel Test</h4>
      <p>Avoir Drupal (inserer un minimum de features)</p>
      <p>C'est lke plus bas niveau de test fonctionnels</p>

      <h4>Javascript Functionnal Test</h4>
      <p>En plus des autres tests fonctionnels il prend en compte le javascript et les fonctionnalités qui y sont associées</p>


      <h3>Tests end to end</h3>
      <p>n'est pas couvert par Drupal. Pour celui-ci, il faut utiliser des outils tels que Behat ou Sélenium sur un environnement déjà fonctionnel</p>
    </article>
    
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>Concrètement dans la construction</h2>

      <p>Le test est la pour voir si le comportement attendu est bien présent en bout de ligne</p>


      <h3>Emplacement et nommage</h3>
      <p>module mon_module, il sera placé ainsi : /modules/custom/mon_module/tests/src/Unit/article/ArticleManagerUnitTest.php</p>
      <p>Le namespace du test sera Drupal\Tests\mon_module\Unit\article.</p>

      <h3>Généralités</h3>
      <p>Un test doit commencer par le mot test</p>
      <p>La methode doit etre publique</p>
      <p>Le nom de la methode de test doit etre comprenseible par n'importe qui</p>
      <p>Dans le cas d'un test unitaire, ce sera UnitTest. La classe étendra UnitTestCase. </p>
      

      <h3>Methode des doubles</h3>
      <h4>Les mocks</h4>
      <p></p>
      <p>Ce sont des objets completement vide que l'on rempli avec des comporteùments attendus pour les tests</p>
      <p>permet de verifier 2 methodes differentes avec les meme fonctionnalités</p>
      <p>Sont créé par des librairies </p>
      

      <h3></h3>
      <h4>Les stubs</h4>
      <p>Ce sont de vrais classes, de vrai objets qui permettront de tester </p>
      <p>On pourrai presque inserer ce code directement dans le code de manière à pouvoir l'utiliser</p>
      <p> Cet objet aura le comportement complet attendu par la dépendance, et son rôle sera de fournir une alternative "interne" à une autre implémentation utilisant des données externes.</p>
      <p>Il est preferable d'effectuer ce type de test sur une interface</p>
      <p>Permet dans les tests d'injecter des dépendances</p>


    </article>

    <article>

      <h2></h2>

      <h3>Test First</h3>
      <p>Le comportement test first indique que l'on fait les tests lorsque l'on construit son code</p>
      <p>Ce fonctionnement oblige à faire ses tests en premier avant de coder.</p>
      <p>Dans le process, le test est en rouge au tout debut (car le code n'est pas construit) et au fur et à mesure que l'o test son code, les indicateurs passent au vert</p>
    </article>


    <article>

      <h2></h2>
      <h3></h3>
      <p>instalation de drupal/core-dev</p>
      <p>puis vérification dans la console avec </p>
      <pre>bin/phpunit web/modules/custom/</pre>

      <p>On rajoute l'installation d'un nouveau module</p>
      <pre>composer require --dev phpspec/prophecy-phpunit</pre>

      <h4>Pour realiser et lancer les tests</h4>
      <p>bin/phpunit -c web/core/phpunit.xml.dist web/modules/custom/</p>


    
    </article>




</body>
</html>



