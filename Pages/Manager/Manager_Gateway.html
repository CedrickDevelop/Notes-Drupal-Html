<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../../css/style.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://kit.fontawesome.com/19d905bb9a.js" crossorigin="anonymous"></script>

    <title></title>
</head>
<body>

    <h1>Manager et gateway</h1>

    <a href="../../index.html"> <button type="button" class="btn btn-success">Accueil</button></a> 

    <!-- BLOCK -->
    <article>

      <h2>Elements indispensables</h2> 

      <h3>Architecture v1</h3>
      <ul>
        <li>Manager : Module/ src / Manager / Nom_du_manager</li>
        <li>Manager : Module/ src / Manager / Nom_du_manager_Interface</li>
        <li>Gateway : Module/ src / Gateway / Nom_du_gateway</li>
        <li>Gateway : Module/ src / Gateway / Nom_du_gateway_Interface</li>
      </ul>

      <h3>Les fichiers indispensables</h3>
      <ul>
        <li>Le manager + le manager interface</li>
        <li>La gateway + la gatewayInterface</li>
        <li>Le service</li>
        <li>Le fichier info.yml</li>
      </ul>


      <h3>La construction</h3>
      <ul>
        <li>Namespace</li>
        <li>Les uses</li>
        <li>La classe + annotations</li>
        <li>Les attributs + annotations</li>
        <li>Le constructeur + annotations</li>
        <li>Les méthodes + annotations</li>


      <img src="" alt="">


    </article>

    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>fichier .info.yml</h2>  

      <img src="./images_manager_gateway/module_info_yml.PNG" alt="">
      
      <p>Puis on doit activer le module avec :</p>
      <pre>Bin/drush en le_nom_du_module</pre>

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>Le fichier d’injection de dépendances et déclaration des classes</h2>  

      <p>Dans le service container on importe l’entity manager. Cela evite de faire une methode create dans le manager.
      </p>
      <p>On déclare la classe et on lui ajoute les arguments (injections de dépendances)
      </p>

      <img src="./images_manager_gateway/service_injection_dependances.PNG" alt="">

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>Le gateway</h2>  

      <p>On récupère les entités et leur contenus pour les faire transiter ensuite par le manager
      </p>

      <img src="./images_manager_gateway/gateway_construct.PNG" alt="">

      <img src="./images_manager_gateway/gateway_query.PNG" alt="">

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>La gateway interface</h2>  

      <p>C’est un outil pour règlementer le fonctionnement de la gateway. On y déclare les méthodes à implémenter. C’est cette classe que l’on appelle par la suite pour utiliser la gateway. C'est comme une vitrine de la gateway.
      </p>

      <img src="./images_manager_gateway/gateway_interface.PNG" alt="">

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>Le manager
      </h2>  

      <p>Dans le manager on va construire la logique de transit des données. Il sera appelé par tous les autres éléménts : plugin, module hook, field formatter... C'est le relai des données.
      </p>

      <img src="./images_manager_gateway/manager_class_construct.PNG" alt="">
      <img src="./images_manager_gateway/manager_get_nodes.PNG" alt="">

      <p>On y ajoute la création du cache</p>
      <p>On peut définir les views modes que l’on veut utiliser dans la méthode view Multiple
      </p>

      <img src="./images_manager_gateway/manager_viewmultiple_cache.PNG" alt="">

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>Déclaration du cache </h2>  

      <p>Ici on met en cache les nodes car ils sont lourds à charger. </p>
      <img src="./images_manager_gateway/cache_generation.PNG" alt="">

      <p>Vérification du cache grâce à l'inspecteur dans l'onglet réseau ou avec le var_dump du node pour connaitre le cache qui est généré </p>
      <img src="./images_manager_gateway/cache_render_array.PNG" alt="">

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>
        Le fichier module Hook</h2>  

      <img src="./images_manager_gateway/module_hook.PNG" alt="">

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>L'affichage dans le template de la variable issue du module hook preprocess node</h2>  

      <img src="./images_manager_gateway/template_variable.PNG" alt="">

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2></h2>  

      <h3></h3>
      <p></p>
      <p></p>

      <img src="" alt="">

    </article>
    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2></h2>  

      <h3></h3>
      <p></p>
      <p></p>

      <img src="" alt="">

    </article>




</body>
</html>



