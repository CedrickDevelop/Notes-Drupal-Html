<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../../../css/style.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://kit.fontawesome.com/19d905bb9a.js" crossorigin="anonymous"></script>

    <title></title>
</head>
<body>

    <h1>Les Queries</h1>

    <a href="../../../index.html"> <button type="button" class="btn btn-success">Accueil</button></a> 

    <!-- BLOCK -->
    <article>

      <h2>Les différents types de demandes</h2> 

      <p>L'interface QueryInterface extends AlterableInterface et permet d'accéder à des méthodes</p>

      <p>interface QueryInterface extends AlterableInterface </p>
      <h4>Obtenir les ids du type d’entité</h4>
      <p><i class="fas fa-meteor"></i> getEntityTypeId();</p>
      <p>Obtenir l'id de l'entité pour la query</p>

      <h4>Faire une recherche sur les champs</h4>
      <p><i class="fas fa-meteor"></i> condition($field, $value = NULL, $operator = NULL, $langcode = NULL);</p>
      <p>Créer une condition de requette ou une condition groupée</p>

      <p><i class="fas fa-meteor"></i> andConditionGroup(); </p>
      <p>Une conditon de groupe avec le ET</p>

      <p><i class="fas fa-meteor"></i> orConditionGroup();</p>
      <p>Une conditon de groupe avec le OU</p>

      <p><i class="fas fa-meteor"></i> exists($field, $langcode = NULL); </p>
      <p>Requete pour un champ qui n'est pas vide</p>
      
      <p><i class="fas fa-meteor"></i> notExists($field, $langcode = NULL);   </p>
      <p>Requete pour un champ qui est vide</p>


      <h4>Pagination</h4>
      <p><i class="fas fa-meteor"></i> pager($limit = 10, $element = NULL);   </p>
      <p>Création d'une pagination pour la recherche en cours</p>
      <p>Avec le pager on devra l’insérer dans la page </p>
      <p>Dans un premier temps on ajoute le pager dans les conditions de la query (dans la gateway)</p>
      <img src="./images/creation_pagination.PNG" alt="">

      <p>Puis dans le module on insère le pager</p>
      <img src="./images/insertion de pagination dans la variable.PNG" alt="">

      <p>Ainsi que dans la twig </p>
      <img src="./images/insertion de la variable dans le twig.PNG" alt="">

      <h4>Définir un nombre de résultats voulus(attention à l’espace)</h4>
      <p><i class="fas fa-meteor"></i> range($start = NULL, $length = NULL);  </p>
      <p>Définit le nombre d'éléments que l'on souhaite</p>

      <h4>Classer dans un ordre précis</h4>
      <p><i class="fas fa-meteor"></i> sort($field, $direction = 'ASC', $langcode = NULL); </p>
      <p>Classe les résultats par ordre croissant "ASC" ou décroissant "DESC"</p>

      <h4>Compter le nombre de résultats</h4>
      <p><i class="fas fa-meteor"></i> count() </p>
      <p>Compter le nombre de résutats dans la requete</p>

      <h4>Les autres</h4>
      <p><i class="fas fa-meteor"></i> tableSort(&$headers); </p>
      <p>Autorise les tables classable dans la requete</p>

      <p><i class="fas fa-meteor"></i> accessCheck($access_check = TRUE);  </p>
      <p>Vérification des accès</p>

      <p><i class="fas fa-meteor"></i> currentRevision(); </p>
      <p>Limite la requete à des default revisions</p>

      <p><i class="fas fa-meteor"></i> latestRevision(); </p>
      <p>Requete de la derniere revision</p>

      <p><i class="fas fa-meteor"></i>allRevisions();  </p>
      <p>Requete sur toutes les révisions</p>

    </article>
    
    <hr>

    <!-- BLOCK -->

    <article>

      <h2>Les éléments essentiels</h2>  
      <img src="./images/exemple de requete de base.PNG" alt="">

      <p> <i class="fas fa-chevron-right"></i> Le type correspond au bundle que l’on souhaite</p>
      <p>Le nom machine des éléménts demandés</p><br>

      <p><i class="fas fa-chevron-right"></i> Le status si c’est publié ou non </p>
      <p>getStorage entity_type_node c’est le type d’entité</p><br>

      <p><i class="fas fa-chevron-right"></i>Node</p>
      <p><i class="fas fa-chevron-right"></i>Taxonomy_term </p>
      <img src="" alt="">

    </article>

    <br><hr><br>
    <!-- BLOCK -->

    <article>

      <h2>Les conditions avec AND</h2>  
      <a href="https://drupal.stackexchange.com/questions/226396/perform-a-query-with-an-entity-field-condition-with-multiple-values"></a>

      <p><i class="fas fa-chevron-right"></i>Celle-ci retourne tous les nodes ayant le term 2 ou 8</p>
      <img src="./images/Exemple de query.PNG" alt="">

      <p><i class="fas fa-chevron-right"></i>Celle-ci retourne tous les nodes ayant le term 2 et  8</p>
      <img src="./images/Exemple de query 2.PNG" alt="">

      <img src="" alt="">

    </article>

    <hr>
    <!-- BLOCK -->

    <article>

      <h2>Load By properties pour choisir le field de selection</h2>  
      <a href="https://www.codegrepper.com/code-examples/whatever/drupal+8+load+node+by+field+value">Charger des nodes en fontion de leurs champs</a>
      <img src="./images/Exemple de query load by properties.PNG" alt="">

  
    </article>


</body>
</html>



