<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../../css/style.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://kit.fontawesome.com/19d905bb9a.js" crossorigin="anonymous"></script>

    <title></title>
</head>
<body>

    <h1>Javascript</h1>

    <a href="../../index.html"> <button type="button" class="btn btn-success">Accueil</button></a> 

    <!-- BLOCK -->
    <article>

      <h2>Ouverture de sous-menu</h2> 
      <p>Dans un premier temps on ajoute la clas d'appartition des éléments avant de faire du js pour creer un peu de logique dans l'apparition des éléménts</p>
      <img src="./images/js-open.png" alt="">
      <img src="./images/main_js_import_fichiers.png" alt="">

      <p>puis on cree notre fichier js dans le src</p>
      <h3></h3>
      <p>Si l'on ajoute un élément dans le js du src/javascript/src, tous les éléménets seront transposés dans le fichier assets/build/js/common.js</p>
      <p>Ainsi si on veut ajouter une nouvelle libarairie on doit faire un import dans le src/main/main.js </p>
      <img src="./images/architecture_javascript.png" alt="">
      

      <h3>Coimportement js sur tout le site main.js</h3>
      <p>il conteient un attach qui doit être initialiser</p>
      <p>les behaviors permet de dom.content.loaded ainsi dans les attachs va se declencher</p>
      <p>Exemple de header.js qui contient la logique js</p>
      <img src="./images/header_javascript.png" alt="">

      <p>puis declarer le attach dans le main.js</p>
      <img src="./images/main_js_import_fichiers.png" alt="">


      <h3>Comportement lorsque l'on veut un page par page</h3>
      <p>On cree un dossier dans le src par exemeple popin ( avec un fichier generaal popin.js puis PopinDefaut dans le src) </p>
      <img src="./images/popin_javascript.png" alt="">
      puis on va declarer la librairie dans le theme.librairie pour declarer la librairie
      <img src="./images/popin_structure_js.png" alt="">
      <p>Puis on peut declarer dans la page que l'on sopuhaite l'utilisation du javascript</p>

      
      <h3>Le module big pipe</h3>
      <p>C'est une extension qui permet de mettre des placeholders dasn l'affichage et lorsque le javascript est chargé il affiche dans le lnavigateur le vrai contenu. En ce sens il est indispensable d'utiliser les behaviors</p>

    </article>

    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>Creation du javascript pour le menu first et second level</h2>  

      <h3>Utilisation de jquery</h3>
      <p></p>
      <p></p>

      <img src="" alt="">

    </article>
    
    <article>

      <h2>Pour le responsive</h2>  

      <h3>L'approche du css</h3>
      <p>Il est plus interressant de mettre les medias queries directement dans le css. C'est à dire le code css qui inclus le media query</p>
      <img src="./images/organisation_media_queries_css.png" alt="">

      <h3>Organisation du template</h3>
      <p>Creation des elements en html pour le desktop et des éléments pour le mobile notamment pour le menu</p>
      <p>Dasn ce cas on applique un dispaly none aux éléments que l'on ne veut poas voir selon le query</p>
      <img src="./images/structure_template_twig.png" alt="">


      <p></p>

      <img src="" alt="">

    </article>


    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2>Mise en place de swiper</h2>  
      <a href="https://swiperjs.com/">voir la doc officielle de swiper</a>

      <h3>Chargement des données</h3>
      <p>Pour que swiper fonctionne bien il faut que le données soient chargées sous forme de tableau. </p>
      <p>Du coup on va modifier</p>
      <ul>
        <li>Le chargement du build dans le block en ajoutant un tableau de chargement</li>
        <img src="./images/Chargement_données_swiper.png" alt="">
        <li>On modifie le chargement dans la gateway avec un foreach view($termà) et on insère les données dans un tableau, au lieu de viewmultipe que l'on insère dans une variable</li>
        <img src="./images/chargement_données_gateway_swiper.png" alt="">

      </ul>

      <p>On a ainsi déplacé la logique de chragement dews données pour recevoir un tableau dans le template twig</p>


      <h3>Chargement du js dans la librairie</h3>
      <h4>on fait les imports dans le fichier js ou l'ion souhaite importer swiper</h4>
      <p>Ici dans lefichier footer.js on importe swiper</p>

      <pre>import {$, T} from "../../common/drupal/drupal";
        import Swiper, { Navigation, Autoplay } from 'swiper';
        Swiper.use([Navigation, Autoplay]);</pre>

        <p>On ajoute la constante de swiper en lui definissant ses attributs dans l'initialisation du js</p>
        <pre>      // template du slider partenaire :
          // web/modules/custom/cp22_saulnier_partners/templates/partners-slider.html.twig
    
    
          const swiper = new Swiper('.swiper', {
            // direction: 'vertical',
            // loop: true,
            slidesPerView: 5,
            spaceBetween: 30,
            autoplay: {
              delay: 2500,
              disableOnInteraction: false,
            },
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
          });
    </pre>

      <img src="./images/footer_js_swiper.png" alt="">

      <h4>importer swiper dans librairie.yml du theme</h4>
      <p>On importe la librairie en definissant son lieu de declaration (le theme d'action</p>
      <pre>  js:
        assets/build/js/main.js: {weight: -1, minified: true}
      dependencies:
        - core/jquery
        - core/drupal
        - cp22_saulnier_theme/swiper</pre>

       <p>Puis on declare la librairie pour la faire exister</p> 
       <pre>swiper:
        css:
          theme:
            https://unpkg.com/swiper@8/swiper-bundle.min.css: { type: external, minified: true, weight: -100}
        js:
          https://unpkg.com/swiper@8/swiper-bundle.min.js: { type: external, minified: true, weight: -100}</pre>


      <img src="./images/librairie_yml_swiper.png" alt="">

      <h4>Dans le telmplate twig</h4>
      <p>On doit charger un tableau d'éléménets dans le twig et charger sur chaque élément swiper</p>
      <ul>
        <li>dans le container: swiper</li>
        <li>dans le wrapper : swiper-wrapper</li>
        <li>sur chaque div element : swiper-slide</li>
      </ul>

      <img src="./images/swiper_template_twig.png" alt="">

    </article>


    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2></h2>  

      <h3></h3>
      <p></p>
      <p></p>

      <img src="" alt="">

    </article>


    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2></h2>  

      <h3></h3>
      <p></p>
      <p></p>

      <img src="" alt="">

    </article>


    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2></h2>  

      <h3></h3>
      <p></p>
      <p></p>

      <img src="" alt="">

    </article>


    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2></h2>  

      <h3></h3>
      <p></p>
      <p></p>

      <img src="" alt="">

    </article>


    <br><hr><br>

    <!-- BLOCK -->

    <article>

      <h2></h2>  

      <h3></h3>
      <p></p>
      <p></p>

      <img src="" alt="">

    </article>





</body>
</html>



